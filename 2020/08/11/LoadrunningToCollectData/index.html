<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Description-->
    
        <meta name="description" content="此文仅是本人学习笔记。
服务器监控数据（一）准备监控工具1.打开crt，择新建连接 ；2.输入IP地址， IP地址为：192.168.1.210；3.输入用户名及，点击OK；4.输入账号密码：wjl/123456，可点击保存密码，这时已经登录上了；
（二）监控命令1.先在crt界面输入命令dstat">
    

    <!--Author-->
    
        <meta name="author" content="xiexy">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Loadrunning收集数据"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Intend blog"/>

    <!--Page Cover-->
    
        <meta property="og:image" content=""/>
    

    <!-- Title -->
    
    <title>Loadrunning收集数据 - Intend blog</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/sass/main.css">


    <!--[if lt IE 8]>
        
<script src="/js/ie/html5shiv.js"></script>

    <![endif]-->

    <!--[if lt IE 8]>
        
<link rel="stylesheet" href="/sass/ie8.css">

    <![endif]-->

    <!--[if lt IE 9]>
        
<link rel="stylesheet" href="/sass/ie9.css">

    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 4.2.1"></head>

<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <div class="inner">

        <!-- Logo -->
        <a href="/" class="logo">
            <span class="symbol"><img src="/images/logo.svg" alt="" /></span><span class="title">Intend blog</span>
        </a>

        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>

    </div>
</header>

<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <ul>
        
            <li>
                <a href="/">Home</a>
            </li>
        
            <li>
                <a href="/archives">Archives</a>
            </li>
        
            <li>
                <a href="/about.html">About</a>
            </li>
        
    </ul>
</nav>


        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    <h1>Loadrunning收集数据</h1>



<!-- Gallery -->


<!-- Content -->
<p>此文仅是本人学习笔记。</p>
<h2 id="服务器监控数据"><a href="#服务器监控数据" class="headerlink" title="服务器监控数据"></a>服务器监控数据</h2><h3 id="（一）准备监控工具"><a href="#（一）准备监控工具" class="headerlink" title="（一）准备监控工具"></a>（一）准备监控工具</h3><p>1.打开crt，择新建连接 ；<br><img src="/images/LoadrunningToCollectData1.png" alt="img"><br>2.输入IP地址， IP地址为：192.168.1.210；<br><img src="/images/LoadrunningToCollectData2.png" alt="img"><br>3.输入用户名及，点击OK；<br><img src="/images/LoadrunningToCollectData3.png" alt="img"><br>4.输入账号密码：wjl/123456，可点击保存密码，这时已经登录上了；<br><img src="/images/LoadrunningToCollectData4.png" alt="img"></p>
<h3 id="（二）监控命令"><a href="#（二）监控命令" class="headerlink" title="（二）监控命令"></a>（二）监控命令</h3><p>1.先在crt界面输入命令dstat -tcdnm -output xxxx.csv（如181116jzdl.csv注：命名要规范181116表示当天时间，jz表示基准测试，dl表示场景名称，如果是容量测试，可加上用户数量（181116rldl20.csv位置可自己喜好来调整；<br><img src="/images/LoadrunningToCollectData5.png" alt="img"><br>2.再打开controller点击开始场景；<br><img src="/images/LoadrunningToCollectData6.png" alt="img"><br>3.回到crt运行之前输入的命令（回车， 查看idl（空闲CPU，目标CPU占用率：≤80%<br><img src="/images/LoadrunningToCollectData7.png" alt="img"><br>4.当场景运行完毕，则在crt这边Ctrl+C停止日志输出。<br><img src="/images/LoadrunningToCollectData8.png" alt="img"></p>
<h3 id="（三）数据保存整理"><a href="#（三）数据保存整理" class="headerlink" title="（三）数据保存整理"></a>（三）数据保存整理</h3><p>1.crt输入下载命令sz rlxzsp20log.csv，择保存路径，可把日志文件下载到本地，该文件可用excel打开编辑；<br><img src="/images/LoadrunningToCollectData9.png" alt="img"><br>打开后：<br><img src="/images/LoadrunningToCollectData10.png" alt="img"><br>2.先在gh之间新增一列用在存放CPU的使用率：<br>计算公式为：（user+sys/sum（CPU总数回车得到CPU使用率；<br><img src="/images/LoadrunningToCollectData11.png" alt="img"><br>照下图操作；<br><img src="/images/LoadrunningToCollectData12.png" alt="img"><br><img src="/images/LoadrunningToCollectData13.png" alt="img"><br>这些多余的数据需要删掉；<br>（判断方法的话，一般运行场景的压测的时候，CPU会有明显的变化。简单来说，你启动运行场景和结束场景运行，这个前后时间里，监控命令是否有多出的监控信息。）<br><img src="/images/LoadrunningToCollectData14.png" alt="img"><br>3.再求出CPU使用率的平均值，再求出内存使用率的平均值；<br><img src="/images/LoadrunningToCollectData15.png" alt="img"><br>4.在求内存使用率：计算公式为：used/sum（总数；<br><img src="/images/LoadrunningToCollectData16.png" alt="img"><br>5.再求内存使用率平均值；<br><img src="/images/LoadrunningToCollectData17.png" alt="img"><br>6.把CPU使用率的平均值和内存使用率平均值填到测试报告的表格里；<br><img src="/images/LoadrunningToCollectData18.png" alt="img"><br>计算网络利用率，公式为send/(2.56<em>1024</em>1024)<br><img src="/images/LoadrunningToCollectData19.png" alt="img"></p>
<h3 id="（四）遇到的问题"><a href="#（四）遇到的问题" class="headerlink" title="（四）遇到的问题"></a>（四）遇到的问题</h3><p>1.执行监控命令<br>[root@localhost /]# dstat -tcdnm 200805jzdl.csv<br>-bash: dstat: 未找到命令<br><img src="/images/LoadrunningToCollectData20.png" alt="img"><br>2.安装dstat<br>yum install -y dstat<br><img src="/images/LoadrunningToCollectData21.png" alt="img"><br>3.上传文件到linux服务器<br>securecrt 按下ALT+P就开启新的会话 进行ftp操作。<br>输入put C:/Users/Administrator/Desktop/dstat-0.7.2-12.el7.noarch.rpm上传<br>上传成功，在查看所在位置：pwd<br><img src="/images/LoadrunningToCollectData22.png" alt="img"><br>4.安装<br>输入rpm -ivh dstat-0.7.2-12.el7.noarch.rpm进行安装<br><img src="/images/LoadrunningToCollectData23.png" alt="img"><br>5.监控<br>dstat -tcdnm -output xxxx.csv<br>dstat -tcdnm xxxx.csv<br>执行后都报错<br><img src="/images/LoadrunningToCollectData24.png" alt="img"><br>执行dstat、dstat -tcdnm都成功<br><img src="/images/LoadrunningToCollectData25.png" alt="img"><br><img src="/images/LoadrunningToCollectData26.png" alt="img"><br>发现output需要—output才能执行<br>执行dstat -tcdnm –output xxxx.csv成功<br><img src="/images/LoadrunningToCollectData27.png" alt="img"><br>5.从linux服务器下载文件<br>securecrt 按下ALT+P就开启新的会话 进行ftp操作。<br>输入get 200805jzdl.csv下载<br><img src="/images/LoadrunningToCollectData28.png" alt="img"><br>其他应用了解地址：<a href="https://wenwen.sogou.com/z/q799956086.htm" target="_blank" rel="noopener">https://wenwen.sogou.com/z/q799956086.htm</a></p>


<!-- Tags -->



<div class="tags">
    <a href="/tags/Loadrunning/" class="button small">Loadrunning</a>
</div>



<!-- Comments -->
<div>
    
    <hr />
    <h3>Comments:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>



</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
    <div class="inner">
        <!-- <section>
            <h2>About</h2>
            <div>
                
            </div>
        </section> -->
        <section>
            <h2>Follow</h2>
            <ul class="icons">
                
                    <li><a href="\#" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-facebook" target="_blank" ><span class="label">Facebook</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-instagram" target="_blank" ><span class="label">Instagram</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-dribbble" target="_blank" ><span class="label">Dribbble</span></a></li>
                
                
                    <li><a href="https://github.com/Intend-xie" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-google-plus" target="_blank" ><span class="label">Google+</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-behance" target="_blank" ><span class="label">Behance</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-500px" target="_blank" ><span class="label">500px</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-envelope-o" target="_blank" ><span class="label">Email</span></a></li>
                
                
                    <li><a href="\#" class="icon style2 fa-rss" target="_blank" ><span class="label">RSS</span></a></li>
                
            </ul>
        </section>
        <!-- <ul class="copyright">
            <li>&copy; Untitled. All rights reserved</li>
            <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
            <li>Hexo: <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></li>
        </ul> -->
    </div>
</footer>
    </div>

    <!-- After footer scripts -->
    
<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- skel -->

<script src="/js/skel.min.js"></script>


<!-- Custom Code -->

<script src="/js/util.js"></script>


<!--[if lte IE 8]>

<script src="/js/ie/respond.min.js"></script>

<![endif]-->

<!-- Custom Code -->

<script src="/js/main.js"></script>


<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'klugjo';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</body>

</html>